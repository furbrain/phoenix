MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 1


   1              		.file "/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c"
   2              		.section	.text,code
   3              		.file "/opt/microchip/xc16/v1.23/bin/bin/../../include/stdint.h"
   4              		.def	_int8_t
   5              		.scl	13
   6              		.type	02
   7              		.endef
   8              		.def	_int16_t
   9              		.scl	13
  10              		.type	04
  11              		.endef
  12              		.def	_int32_t
  13              		.scl	13
  14              		.type	05
  15              		.endef
  16              		.def	_int64_t
  17              		.scl	13
  18              		.type	05
  19              		.endef
  20              		.def	_uint8_t
  21              		.scl	13
  22              		.type	014
  23              		.endef
  24              		.def	_uint16_t
  25              		.scl	13
  26              		.type	016
  27              		.endef
  28              		.def	_uint32_t
  29              		.scl	13
  30              		.type	017
  31              		.endef
  32              		.def	_uint64_t
  33              		.scl	13
  34              		.type	017
  35              		.endef
  36              		.def	_int_least8_t
  37              		.scl	13
  38              		.type	02
  39              		.endef
  40              		.def	_int_least16_t
  41              		.scl	13
  42              		.type	04
  43              		.endef
  44              		.def	_int_least24_t
  45              		.scl	13
  46              		.type	05
  47              		.endef
  48              		.def	_int_least32_t
  49              		.scl	13
  50              		.type	05
  51              		.endef
  52              		.def	_int_least64_t
  53              		.scl	13
  54              		.type	05
  55              		.endef
  56              		.def	_uint_least8_t
  57              		.scl	13
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 2


  58              		.type	014
  59              		.endef
  60              		.def	_uint_least16_t
  61              		.scl	13
  62              		.type	016
  63              		.endef
  64              		.def	_uint_least24_t
  65              		.scl	13
  66              		.type	05
  67              		.endef
  68              		.def	_uint_least32_t
  69              		.scl	13
  70              		.type	017
  71              		.endef
  72              		.def	_uint_least64_t
  73              		.scl	13
  74              		.type	017
  75              		.endef
  76              		.def	_int_fast8_t
  77              		.scl	13
  78              		.type	04
  79              		.endef
  80              		.def	_int_fast16_t
  81              		.scl	13
  82              		.type	04
  83              		.endef
  84              		.def	_int_fast24_t
  85              		.scl	13
  86              		.type	05
  87              		.endef
  88              		.def	_int_fast32_t
  89              		.scl	13
  90              		.type	05
  91              		.endef
  92              		.def	_int_fast64_t
  93              		.scl	13
  94              		.type	05
  95              		.endef
  96              		.def	_uint_fast8_t
  97              		.scl	13
  98              		.type	016
  99              		.endef
 100              		.def	_uint_fast16_t
 101              		.scl	13
 102              		.type	016
 103              		.endef
 104              		.def	_uint_fast24_t
 105              		.scl	13
 106              		.type	017
 107              		.endef
 108              		.def	_uint_fast32_t
 109              		.scl	13
 110              		.type	017
 111              		.endef
 112              		.def	_uint_fast64_t
 113              		.scl	13
 114              		.type	017
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 3


 115              		.endef
 116              		.def	_intmax_t
 117              		.scl	13
 118              		.type	05
 119              		.endef
 120              		.def	_uintmax_t
 121              		.scl	13
 122              		.type	017
 123              		.endef
 124              		.file "/home/phil/Projects/phoenix/firmware/bootloader/usb_config.h"
 125              		.file "/home/phil/Projects/phoenix/firmware/bootloader/usb/include/usb_microsoft.h"
 126              		.file "/opt/microchip/xc16/v1.23/bin/bin/../../include/stdint.h"
 127              		.def	_microsoft_os_descriptor
 128              		.scl	10
 129              		.type	010
 130              		.size	18
 131              		.endef
 132              		.def	_bLength
 133              		.val	0
 134              		.scl	8
 135              		.type	014
 136              		.endef
 137              		.def	_bDescriptorType
 138              		.val	1
 139              		.scl	8
 140              		.type	014
 141              		.endef
 142              		.def	_qwSignature
 143              		.val	2
 144              		.scl	8
 145              		.dim	7
 146              		.size	14
 147              		.type	076
 148              		.endef
 149              		.def	_bMS_VendorCode
 150              		.val	16
 151              		.scl	8
 152              		.type	014
 153              		.endef
 154              		.def	_bPad
 155              		.val	17
 156              		.scl	8
 157              		.type	014
 158              		.endef
 159              		.def	.eos
 160              		.val	18
 161              		.scl	102
 162              		.tag	_microsoft_os_descriptor
 163              		.size	18
 164              		.endef
 165              		.def	_microsoft_extended_compat_header
 166              		.scl	10
 167              		.type	010
 168              		.size	16
 169              		.endef
 170              		.def	_dwLength
 171              		.val	0
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 4


 172              		.scl	8
 173              		.type	017
 174              		.endef
 175              		.def	_bcdVersion
 176              		.val	4
 177              		.scl	8
 178              		.type	016
 179              		.endef
 180              		.def	_wIndex
 181              		.val	6
 182              		.scl	8
 183              		.type	016
 184              		.endef
 185              		.def	_bCount
 186              		.val	8
 187              		.scl	8
 188              		.type	014
 189              		.endef
 190              		.def	_reserved
 191              		.val	9
 192              		.scl	8
 193              		.dim	7
 194              		.size	7
 195              		.type	074
 196              		.endef
 197              		.def	.eos
 198              		.val	16
 199              		.scl	102
 200              		.tag	_microsoft_extended_compat_header
 201              		.size	16
 202              		.endef
 203              		.def	_microsoft_extended_compat_function
 204              		.scl	10
 205              		.type	010
 206              		.size	24
 207              		.endef
 208              		.def	_bFirstInterfaceNumber
 209              		.val	0
 210              		.scl	8
 211              		.type	014
 212              		.endef
 213              		.def	_reserved
 214              		.val	1
 215              		.scl	8
 216              		.type	014
 217              		.endef
 218              		.def	_compatibleID
 219              		.val	2
 220              		.scl	8
 221              		.dim	8
 222              		.size	8
 223              		.type	074
 224              		.endef
 225              		.def	_subCompatibleID
 226              		.val	10
 227              		.scl	8
 228              		.dim	8
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 5


 229              		.size	8
 230              		.type	074
 231              		.endef
 232              		.def	_reserved2
 233              		.val	18
 234              		.scl	8
 235              		.dim	6
 236              		.size	6
 237              		.type	074
 238              		.endef
 239              		.def	.eos
 240              		.val	24
 241              		.scl	102
 242              		.tag	_microsoft_extended_compat_function
 243              		.size	24
 244              		.endef
 245              		.def	_microsoft_extended_properties_header
 246              		.scl	10
 247              		.type	010
 248              		.size	10
 249              		.endef
 250              		.def	_dwLength
 251              		.val	0
 252              		.scl	8
 253              		.type	017
 254              		.endef
 255              		.def	_bcdVersion
 256              		.val	4
 257              		.scl	8
 258              		.type	016
 259              		.endef
 260              		.def	_wIndex
 261              		.val	6
 262              		.scl	8
 263              		.type	016
 264              		.endef
 265              		.def	_bCount
 266              		.val	8
 267              		.scl	8
 268              		.type	016
 269              		.endef
 270              		.def	.eos
 271              		.val	10
 272              		.scl	102
 273              		.tag	_microsoft_extended_properties_header
 274              		.size	10
 275              		.endef
 276              		.def	_microsoft_extended_property_section_header
 277              		.scl	10
 278              		.type	010
 279              		.size	8
 280              		.endef
 281              		.def	_dwSize
 282              		.val	0
 283              		.scl	8
 284              		.type	017
 285              		.endef
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 6


 286              		.def	_dwPropertyDataType
 287              		.val	4
 288              		.scl	8
 289              		.type	017
 290              		.endef
 291              		.def	.eos
 292              		.val	8
 293              		.scl	102
 294              		.tag	_microsoft_extended_property_section_header
 295              		.size	8
 296              		.endef
 297              		.file "/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.h"
 298              		.file "/opt/microchip/xc16/v1.23/bin/bin/../../include/stdint.h"
 299              		.def	_extended_compat_descriptor_packet
 300              		.scl	10
 301              		.type	010
 302              		.size	40
 303              		.endef
 304              		.def	_header
 305              		.val	0
 306              		.scl	8
 307              		.tag	_microsoft_extended_compat_header
 308              		.size	16
 309              		.type	010
 310              		.endef
 311              		.def	_function
 312              		.val	16
 313              		.scl	8
 314              		.tag	_microsoft_extended_compat_function
 315              		.size	24
 316              		.type	010
 317              		.endef
 318              		.def	.eos
 319              		.val	40
 320              		.scl	102
 321              		.tag	_extended_compat_descriptor_packet
 322              		.size	40
 323              		.endef
 324              		.section	.text,code
 325              		.align	2
 326              		.def	_m_stack_winusb_get_microsoft_compat
 327              		.val	_m_stack_winusb_get_microsoft_compat
 328              		.scl	2
 329              		.type	056
 330              		.endef
 331              		.global	_m_stack_winusb_get_microsoft_compat	; export
 332              	_m_stack_winusb_get_microsoft_compat:
 333              		.def	.bf
 334              		.val	.
 335              		.scl	101
   1:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** /*
   2:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  M-Stack Automatic WinUSB Support
   3:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  Copyright (C) 2013 Alan Ott <alan@signal11.us>
   4:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  Copyright (C) 2013 Signal 11 Software
   5:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *
   6:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  2013-10-12
   7:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 7


   8:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  M-Stack is free software: you can redistribute it and/or modify it under
   9:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  the terms of the GNU Lesser General Public License as published by the
  10:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  Free Software Foundation, version 3; or the Apache License, version 2.0
  11:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  as published by the Apache Software Foundation.  If you have purchased a
  12:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  commercial license for this software from Signal 11 Software, your
  13:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  commerical license superceeds the information in this header.
  14:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *
  15:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  M-Stack is distributed in the hope that it will be useful, but WITHOUT
  16:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  17:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public
  18:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  License for more details.
  19:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *
  20:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  You should have received a copy of the GNU Lesser General Public License
  21:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  along with this software.  If not, see <http://www.gnu.org/licenses/>.
  22:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *
  23:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  You should have received a copy of the Apache License, verion 2.0 along
  24:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  *  with this software.  If not, see <http://www.apache.org/licenses/>.
  25:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  */
  26:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 
  27:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** #include <stdint.h>
  28:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** #include "usb_config.h"
  29:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** #include "usb_microsoft.h"
  30:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** #include "usb_winusb.h"
  31:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 
  32:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** #ifdef AUTOMATIC_WINUSB_SUPPORT
  33:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 
  34:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** /* Microsoft-specific descriptors for automatic binding of the WinUSB driver.
  35:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****  * See docs/winusb.txt for details. */
  36:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** struct extended_compat_descriptor_packet {
  37:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	struct microsoft_extended_compat_header header;
  38:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	struct microsoft_extended_compat_function function;
  39:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** };
  40:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 
  41:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** static struct extended_compat_descriptor_packet
  42:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	this_extended_compat_descriptor =
  43:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** {
  44:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	/* Header */
  45:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	{
  46:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	sizeof(struct extended_compat_descriptor_packet), /* dwLength */
  47:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	0x0100, /* dwVersion*/
  48:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	0x0004, /* wIndex: 0x0004 = Extended Compat ID */
  49:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	1,      /* bCount, number of custom property sections */
  50:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	{0},    /* reserved[7] */
  51:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	},
  52:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 
  53:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	/* Function */
  54:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	{
  55:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	0x0,      /* bFirstInterfaceNumber */
  56:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	0x1,      /* reserved. Set to 1 in the Microsoft example */
  57:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	"WINUSB", /* compatibleID[8] */
  58:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	"",       /* subCompatibleID[8] */
  59:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	{0},      /* reserved2[6] */
  60:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	},
  61:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** };
  62:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 
  63:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** static struct microsoft_extended_properties_header
  64:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 				interface_0_property_descriptor =
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 8


  65:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** {
  66:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	sizeof(interface_0_property_descriptor), /* dwLength */
  67:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	0x0100, /* bcdVersion */
  68:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	0x0005, /* wIndex, Extended Properties descriptor */
  69:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	0x0,    /* bCount, Number of custom property sections */
  70:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** };
  71:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 
  72:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** uint16_t m_stack_winusb_get_microsoft_compat(uint8_t interface,
  73:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****                                               const void **descriptor)
  74:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** {
 336              		.line	74
 337              		.endef
 338              		.def	_interface
 339              		.val	0
 340              		.scl	17
 341              		.type	014
 342              		.endef
 343              		.def	_descriptor
 344              		.val	1
 345              		.scl	17
 346              		.type	0121
 347              		.endef
 348              		.def	.bb
 349              		.val	.
 350              		.scl	100
 351              		.line	74
 352              		.endef
 353              		.set ___PA___,1
 354              		.def	___FP
 355              		.val	15
 356              		.scl	4
 357              		.type	4
 358              		.endef
  75:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	/* Check the interface here for composite devices. */
  76:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	*descriptor = &this_extended_compat_descriptor;
 359              		.ln	76
 360 000000  04 00 20 		mov	#_this_extended_compat_descriptor,w4
 361 000002  84 08 78 		mov	w4,[w1]
  77:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	return sizeof(this_extended_compat_descriptor);
  78:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** }
 362              		.ln	78
 363 000004  80 02 05 		retlw	#40,w0
 364              		.set ___PA___,0
 365              		.def	.eb
 366              		.val	.
 367              		.scl	100
 368              		.line	78
 369              		.endef
 370              		.def	.ef
 371              		.val	.
 372              		.scl	101
 373              		.line	78
 374              		.endef
 375              		.def	_m_stack_winusb_get_microsoft_compat
 376              		.val	.
 377              		.scl	-1
 378              		.endef
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 9


 379              		.align	2
 380              		.def	_m_stack_winusb_get_microsoft_property
 381              		.val	_m_stack_winusb_get_microsoft_property
 382              		.scl	2
 383              		.type	056
 384              		.endef
 385              		.global	_m_stack_winusb_get_microsoft_property	; export
 386              	_m_stack_winusb_get_microsoft_property:
 387              		.def	.bf
 388              		.val	.
 389              		.scl	101
  79:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 
  80:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** uint16_t m_stack_winusb_get_microsoft_property(uint8_t interface,
  81:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c ****                                                 const void **descriptor)
  82:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** {
 390              		.line	82
 391              		.endef
 392              		.def	_interface
 393              		.val	0
 394              		.scl	17
 395              		.type	014
 396              		.endef
 397              		.def	_descriptor
 398              		.val	1
 399              		.scl	17
 400              		.type	0121
 401              		.endef
 402              		.def	.bb
 403              		.val	.
 404              		.scl	100
 405              		.line	82
 406              		.endef
 407              		.set ___PA___,1
 408              		.def	___FP
 409              		.val	15
 410              		.scl	4
 411              		.type	4
 412              		.endef
  83:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	/* Check the interface here for composite devices. */
  84:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	*descriptor = &interface_0_property_descriptor;
 413              		.ln	84
 414 000006  04 00 20 		mov	#_interface_0_property_descriptor,w4
 415 000008  84 08 78 		mov	w4,[w1]
  85:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** 	return sizeof(interface_0_property_descriptor);
  86:/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c **** }
 416              		.ln	86
 417 00000a  A0 00 05 		retlw	#10,w0
 418              		.set ___PA___,0
 419              		.def	.eb
 420              		.val	.
 421              		.scl	100
 422              		.line	86
 423              		.endef
 424              		.def	.ef
 425              		.val	.
 426              		.scl	101
 427              		.line	86
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 10


 428              		.endef
 429              		.def	_m_stack_winusb_get_microsoft_property
 430              		.val	.
 431              		.scl	-1
 432              		.endef
 433              		.section	.ndata,data,near
 434                 		.align	2
 435                 	_interface_0_property_descriptor:
 436 0000 0A 00 00 00 		.long	10
 437 0004 00 01       		.word	256
 438 0006 05 00       		.word	5
 439 0008 00 00       		.word	0
 440                 		.align	2
 441                 	_this_extended_compat_descriptor:
 442 000a 28 00 00 00 		.long	40
 443 000e 00 01       		.word	256
 444 0010 04 00       		.word	4
 445 0012 01          		.byte 1
 446 0013 00          		.byte 0
 447 0014 00 00 00 00 		.skip	6
 447      00 00 
 448 001a 00          		.byte 0
 449 001b 01          		.byte 1
 450 001c 57 49 4E 55 		.asciz	"WINUSB"
 450      53 42 00 
 451 0023 00          		.skip	1
 452 0024 00          		.byte	0
 453 0025 00 00 00 00 		.skip	7
 453      00 00 00 
 454 002c 00          		.byte 0
 455 002d 00 00 00 00 		.skip	5
 455      00 
 456                 		.section	.text,code
 457              		.def	_this_extended_compat_descriptor
 458              		.val	_this_extended_compat_descriptor
 459              		.scl	3
 460              		.tag	_extended_compat_descriptor_packet
 461              		.size	40
 462              		.type	010
 463              		.endef
 464              		.def	_interface_0_property_descriptor
 465              		.val	_interface_0_property_descriptor
 466              		.scl	3
 467              		.tag	_microsoft_extended_properties_header
 468              		.size	10
 469              		.type	010
 470              		.endef
 471              	
 472              		.section __c30_signature, info, data
 473 0000 01 00       		.word 0x0001
 474 0002 00 00       		.word 0x0000
 475 0004 00 00       		.word 0x0000
 476                 	
 477                 	; MCHP configuration words
 478                 	
 479                 		.set ___PA___,0
 480                 		.end
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 11


MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 12


DEFINED SYMBOLS
                            *ABS*:00000000 /opt/microchip/xc16/v1.23/bin/bin/../../include/stdint.h
                            *ABS*:00000000 /home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.h
                            *ABS*:00000000 /opt/microchip/xc16/v1.23/bin/bin/../../include/stdint.h
                            *ABS*:00000000 /home/phil/Projects/phoenix/firmware/bootloader/usb/include/usb_microsoft.h
                            *ABS*:00000000 /home/phil/Projects/phoenix/firmware/bootloader/usb_config.h
                            *ABS*:00000000 /opt/microchip/xc16/v1.23/bin/bin/../../include/stdint.h
                            *ABS*:00000000 /home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c
                            *ABS*:00000001 __C30COFF
                            *ABS*:00000000 _int8_t
                            *ABS*:00000000 _int16_t
                            *ABS*:00000000 _int32_t
                            *ABS*:00000000 _int64_t
                            *ABS*:00000000 _uint8_t
                            *ABS*:00000000 _uint16_t
                            *ABS*:00000000 _uint32_t
                            *ABS*:00000000 _uint64_t
                            *ABS*:00000000 _int_least8_t
                            *ABS*:00000000 _int_least16_t
                            *ABS*:00000000 _int_least24_t
                            *ABS*:00000000 _int_least32_t
                            *ABS*:00000000 _int_least64_t
                            *ABS*:00000000 _uint_least8_t
                            *ABS*:00000000 _uint_least16_t
                            *ABS*:00000000 _uint_least24_t
                            *ABS*:00000000 _uint_least32_t
                            *ABS*:00000000 _uint_least64_t
                            *ABS*:00000000 _int_fast8_t
                            *ABS*:00000000 _int_fast16_t
                            *ABS*:00000000 _int_fast24_t
                            *ABS*:00000000 _int_fast32_t
                            *ABS*:00000000 _int_fast64_t
                            *ABS*:00000000 _uint_fast8_t
                            *ABS*:00000000 _uint_fast16_t
                            *ABS*:00000000 _uint_fast24_t
                            *ABS*:00000000 _uint_fast32_t
                            *ABS*:00000000 _uint_fast64_t
                            *ABS*:00000000 _intmax_t
                            *ABS*:00000000 _uintmax_t
                            *ABS*:00000000 _microsoft_os_descriptor
                            *ABS*:00000000 _bLength
                            *ABS*:00000001 _bDescriptorType
                            *ABS*:00000002 _qwSignature
                            *ABS*:00000010 _bMS_VendorCode
                            *ABS*:00000011 _bPad
                            *ABS*:00000012 .eos
                            *ABS*:00000000 _microsoft_extended_compat_header
                            *ABS*:00000000 _dwLength
                            *ABS*:00000004 _bcdVersion
                            *ABS*:00000006 _wIndex
                            *ABS*:00000008 _bCount
                            *ABS*:00000009 _reserved
                            *ABS*:00000010 .eos
                            *ABS*:00000000 _microsoft_extended_compat_function
                            *ABS*:00000000 _bFirstInterfaceNumber
                            *ABS*:00000001 _reserved
                            *ABS*:00000002 _compatibleID
MPLAB XC16 ASSEMBLY Listing:  usb_winusb.s 			page 13


                            *ABS*:0000000a _subCompatibleID
                            *ABS*:00000012 _reserved2
                            *ABS*:00000018 .eos
                            *ABS*:00000000 _microsoft_extended_properties_header
                            *ABS*:00000000 _dwLength
                            *ABS*:00000004 _bcdVersion
                            *ABS*:00000006 _wIndex
                            *ABS*:00000008 _bCount
                            *ABS*:0000000a .eos
                            *ABS*:00000000 _microsoft_extended_property_section_header
                            *ABS*:00000000 _dwSize
                            *ABS*:00000004 _dwPropertyDataType
                            *ABS*:00000008 .eos
                            *ABS*:00000000 _extended_compat_descriptor_packet
                            *ABS*:00000000 _header
                            *ABS*:00000010 _function
                            *ABS*:00000028 .eos
        usb_winusb.s:332    .text:00000000 _m_stack_winusb_get_microsoft_compat
        usb_winusb.s:334    .text:00000000 .bf
                            *ABS*:00000000 _interface
                            *ABS*:00000001 _descriptor
        usb_winusb.s:349    .text:00000000 .bb
        usb_winusb.s:353    *ABS*:00000000 ___PA___
                            *ABS*:0000000f ___FP
        usb_winusb.s:360    .text:00000000 $AUTOLINE$
        usb_winusb.s:366    .text:00000006 .eb
        usb_winusb.s:371    .text:00000006 .ef
        usb_winusb.s:376    .text:00000006 _m_stack_winusb_get_microsoft_compat
        usb_winusb.s:386    .text:00000006 _m_stack_winusb_get_microsoft_property
        usb_winusb.s:388    .text:00000006 .bf
                            *ABS*:00000000 _interface
                            *ABS*:00000001 _descriptor
        usb_winusb.s:403    .text:00000006 .bb
                            *ABS*:0000000f ___FP
        usb_winusb.s:420    .text:0000000c .eb
        usb_winusb.s:425    .text:0000000c .ef
        usb_winusb.s:430    .text:0000000c _m_stack_winusb_get_microsoft_property
        usb_winusb.s:441    .ndata:0000000a _this_extended_compat_descriptor
        usb_winusb.s:435    .ndata:00000000 _interface_0_property_descriptor

NO UNDEFINED SYMBOLS

EQUATE SYMBOLS
/opt/microchip/xc16/v1.23/bin/bin/../../include/stdint.h = 0x0
/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.h = 0x0
/opt/microchip/xc16/v1.23/bin/bin/../../include/stdint.h = 0x0
/home/phil/Projects/phoenix/firmware/bootloader/usb/include/usb_microsoft.h = 0x0
/home/phil/Projects/phoenix/firmware/bootloader/usb_config.h = 0x0
/opt/microchip/xc16/v1.23/bin/bin/../../include/stdint.h = 0x0
/home/phil/Projects/phoenix/firmware/bootloader/usb_winusb.c = 0x0
                       __C30COFF = 0x1
                         _int8_t = 0x0
                        _int16_t = 0x0
                        _int32_t = 0x0
                        _int64_t = 0x0
                        _uint8_t = 0x0
                       _uint16_t = 0x0
                       _uint32_t = 0x0
                       _uint64_t = 0x0
                   _int_least8_t = 0x0
                  _int_least16_t = 0x0
                  _int_least24_t = 0x0
                  _int_least32_t = 0x0
                  _int_least64_t = 0x0
                  _uint_least8_t = 0x0
                 _uint_least16_t = 0x0
                 _uint_least24_t = 0x0
                 _uint_least32_t = 0x0
                 _uint_least64_t = 0x0
                    _int_fast8_t = 0x0
                   _int_fast16_t = 0x0
                   _int_fast24_t = 0x0
                   _int_fast32_t = 0x0
                   _int_fast64_t = 0x0
                   _uint_fast8_t = 0x0
                  _uint_fast16_t = 0x0
                  _uint_fast24_t = 0x0
                  _uint_fast32_t = 0x0
                  _uint_fast64_t = 0x0
                       _intmax_t = 0x0
                      _uintmax_t = 0x0
        _microsoft_os_descriptor = 0x0
                        _bLength = 0x0
                _bDescriptorType = 0x1
                    _qwSignature = 0x2
                 _bMS_VendorCode = 0x10
                           _bPad = 0x11
                            .eos = 0x12
_microsoft_extended_compat_header = 0x0
                       _dwLength = 0x0
                     _bcdVersion = 0x4
                         _wIndex = 0x6
                         _bCount = 0x8
                       _reserved = 0x9
                            .eos = 0x10
_microsoft_extended_compat_function = 0x0
          _bFirstInterfaceNumber = 0x0
                       _reserved = 0x1
                   _compatibleID = 0x2
                _subCompatibleID = 0xa
                      _reserved2 = 0x12
                            .eos = 0x18
_microsoft_extended_properties_header = 0x0
                       _dwLength = 0x0
                     _bcdVersion = 0x4
                         _wIndex = 0x6
                         _bCount = 0x8
                            .eos = 0xa
_microsoft_extended_property_section_header = 0x0
                         _dwSize = 0x0
             _dwPropertyDataType = 0x4
                            .eos = 0x8
_extended_compat_descriptor_packet = 0x0
                         _header = 0x0
                       _function = 0x10
                            .eos = 0x28
                      _interface = 0x0
                     _descriptor = 0x1
                        ___PA___ = 0x0
                           ___FP = 0xf
                      _interface = 0x0
                     _descriptor = 0x1
                           ___FP = 0xf
